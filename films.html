<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Фильмы</title>
        <link rel="stylesheet" href="films.css">
    </head>
    <body>
        <ul>
            <a href="index.html">
                <li>
                    <img style="box-shadow: none; position: static; border-radius: 100%; height: 5vh;" src="img/321321.png">
                    На главную
                </li>
            </a>
        </ul>
        <label class="sound-button" for="qwert">
            <img src="img/sound-button.webp" width="100" height="100" alt="">
            
            <img src="img/sound-play.jpg" width="100" height="100" alt="">
            <input type="checkbox" id="qwert" style="display: none;">
        </label>           
        <h1>Фильмы</h1>
        <div>
            <a class="a-film" href="https://www.kinopoisk.ru/film/690593/" target="_blank">
                Человек-паук: Возвращение домой (2017)
                <img src="img/1.png">
                <button class="phone">
                    <img src="img/sound-play.jpg" width="40" height="40" alt="">
                </button> 
            </a>
            <a class="a-film" href="https://www.kinopoisk.ru/film/843649/" target="_blank">
                Мстители: Война бесконечности (2018)
                <img src="img/2.png">
                <button class="phone">
                    <img src="img/sound-play.jpg" width="40" height="40" alt="">
                </button> 
            </a>
            <a class="a-film" href="https://www.kinopoisk.ru/film/843650/" target="_blank">
                Мстители: Финал (2019)
                <img src="img/3.png">
                <audio src="voice/MSTITELI-FINAL.mp3"></audio>
                <button class="phone">
                    <img src="img/sound-play.jpg" width="40" height="40" alt="">
                </button> 
            </a>
            <a class="a-film" href="https://www.kinopoisk.ru/film/1008445/" target="_blank">
                Человек-паук: Вдали от дома (2019)
                <img src="img/4.png">
                <button class="phone">
                    <img src="img/sound-play.jpg" width="40" height="40" alt="">
                </button> 
            </a>
            <a class="a-film" href="https://www.kinopoisk.ru/film/1309570/" target="_blank">
                Человек-паук: Нет пути домой (2021)
                <img src="img/5.png">
                <button class="phone">
                    <img src="img/sound-play.jpg" width="40" height="40" alt="">
                </button> 
            </a>
        </div>
        <div class="modal">
            <button class="close">Х</button>
            <div class="video">
                <iframe width="720" height="405" src="https://rutube.ru/play/embed/6411d33b66a9bde84eb5435ebb12e022/" frameBorder="0" allow="clipboard-write; autoplay" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
            </div>
        </div>
    </body>
    <script>
        try {
            let isPlay = false
            document.querySelectorAll('.a-film:has(audio)').forEach(el=>{
                el.addEventListener('mouseenter', ()=>{
                    if (!document.querySelector('.sound-button input:checked')) {return}
                    el.querySelector('audio').play()
                })
                el.addEventListener('mouseleave', ()=>{
                    el.querySelector('audio').pause()
                })
                el.addEventListener('touchstart', ()=>{
                    if (!document.querySelector('.sound-button input:checked')) {return}
                    if (!isPlay) {
                        el.querySelector('audio').play()
                    } else {
                        el.querySelector('audio').pause()
                    }
                    isPlay = !isPlay
                })
            })

            document.querySelectorAll('.phone').forEach(el=>{
                el.addEventListener('click', (e)=>{
                    el.classList.toggle('active')
                    e.preventDefault()

                    if (el.classList.contains('active')) {
                        el.parentElement.querySelector('audio').play()
                    } else {
                        el.parentElement.querySelector('audio').pause()                        
                    }
                })

            })
        
            let filmsList = []
            let filmLinks = document.querySelectorAll('.a-film')  
            let modal = document.querySelector('.modal') 
            let closeButton =  document.querySelector('.close') 
            
            filmLinks.forEach(el=>{
                el.onclick = (e)=>{
                    e.preventDefault()
                    modal.style.display = "flex"
                }
            })

            closeButton.onclick = ()=>{
                modal.style.display = "none"
            }

        } catch {}


    </script>
</html>